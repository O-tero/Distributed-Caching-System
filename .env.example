# Environment Configuration for Distributed Caching System
# Copy this file to .env and customize for your environment
#
# Usage: cp .env.example .env

# ============================================================================
# POSTGRESQL CONFIGURATION
# ============================================================================

# PostgreSQL connection settings
POSTGRES_USER=cache_user
POSTGRES_PASSWORD=changeme_dev_only
POSTGRES_DB=distributed_cache
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# Connection pool settings (for application)
POSTGRES_MAX_CONNECTIONS=20
POSTGRES_MIN_CONNECTIONS=5

# Full connection URL (alternative to individual settings)
# DATABASE_URL=postgresql://cache_user:changeme_dev_only@localhost:5432/distributed_cache

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================

# Redis connection settings
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
# REDIS_DB=0

# Memory management
REDIS_MAXMEMORY=512mb
REDIS_EVICTION_POLICY=volatile-lru

# Full connection URL (alternative)
# REDIS_URL=redis://localhost:6379/0

# ============================================================================
# SERVICE URLs
# ============================================================================

# Cache Manager Service
CACHE_MANAGER_URL=http://localhost:9400
CACHE_MANAGER_PORT=9400

# Invalidation Service
INVALIDATION_URL=http://localhost:9401
INVALIDATION_PORT=9401

# Warming Service
WARMING_URL=http://localhost:9402
WARMING_PORT=9402

# Monitoring Service
MONITORING_URL=http://localhost:9403
MONITORING_PORT=9403

# ============================================================================
# PROMETHEUS & MONITORING
# ============================================================================

PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION=7d

# Grafana (if enabled)
GRAFANA_PORT=3000
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin

# ============================================================================
# CACHE CONFIGURATION
# ============================================================================

# L1 Cache (In-Memory)
L1_CACHE_SIZE=10000
L1_CACHE_TTL=300

# L2 Cache (Redis)
L2_CACHE_TTL=3600
L2_CACHE_COMPRESSION=false

# Eviction policy
CACHE_EVICTION_POLICY=lru

# ============================================================================
# RATE LIMITING
# ============================================================================

# Global rate limits
RATE_LIMIT_REQUESTS_PER_SECOND=1000
RATE_LIMIT_BURST=2000

# Per-user rate limits
RATE_LIMIT_PER_USER=100

# ============================================================================
# LOGGING
# ============================================================================

# Log level: debug, info, warn, error
LOG_LEVEL=info

# Log format: json, text
LOG_FORMAT=json

# Enable request logging
LOG_REQUESTS=true

# ============================================================================
# DEVELOPMENT SETTINGS
# ============================================================================

# Environment: development, staging, production
ENVIRONMENT=development

# Enable debug mode
DEBUG=true

# Enable hot reload
HOT_RELOAD=true

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Enable distributed tracing
ENABLE_TRACING=false

# Enable metrics export
ENABLE_METRICS=true

# Enable cache warming
ENABLE_CACHE_WARMING=true

# ============================================================================
# SECURITY (DEVELOPMENT ONLY)
# ============================================================================

# API Keys (generate strong keys for production)
API_KEY_ADMIN=dev_admin_key_change_me
API_KEY_SERVICE=dev_service_key_change_me

# CORS allowed origins (comma-separated)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:9400

# ============================================================================
# LOAD TESTING
# ============================================================================

# Load test configuration
LOAD_TEST_RATE=100
LOAD_TEST_DURATION=30s
LOAD_TEST_PATTERN=uniform

# ============================================================================
# BACKUP & MAINTENANCE
# ============================================================================

# Backup retention
BACKUP_RETENTION_DAYS=7

# Auto-cleanup intervals
CLEANUP_AUDIT_LOGS_DAYS=90
CLEANUP_METRICS_DAYS=30

# ============================================================================
# NOTES
# ============================================================================

# SECURITY WARNING:
# - These are development defaults with weak passwords
# - NEVER use these values in production
# - Use secrets management (Vault, AWS Secrets Manager, etc.)
# - Rotate credentials regularly
# - Enable TLS/SSL for all connections
#
# PRODUCTION CHECKLIST:
# - [ ] Change all passwords to strong, random values
# - [ ] Enable Redis authentication (requirepass)
# - [ ] Use SSL/TLS for PostgreSQL connections
# - [ ] Set up proper firewall rules
# - [ ] Configure resource limits (memory, CPU)
# - [ ] Enable audit logging
# - [ ] Set up monitoring and alerting
# - [ ] Implement backup strategy
# - [ ] Review and harden security settings